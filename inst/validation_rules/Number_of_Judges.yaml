# Defines checks to be applied to data loaded from the 'Number of Judges' worksheet
# Requires 'validJudges' to be passed as a reference, e.g.
#
# confront(df, rules, ref = list(validJudges = c('Magistrates', 'DJMC')))

rules:
- expr: `Number of Judges` >= 0
  name: 'MinJudges'
  label: 'Minimum number of judges'
  description: |
    Check starting number of judges defined is >= zero
  created: 2021-06-10
  meta:
    severity: error
    worksheet: 'Number of Judges'
    errorMessage: |
      Number of Judges must be a postive number. Please check values entered 
      in Number of Judges worksheet.
  
- expr: is_unique(`Judge Type`, Region)
  name: 'duplicates'
  label: 'No duplicate rows'
  description: |
    Checks that there are no duplicate combinations of Judge / Region
  created: 2021-06-10
  meta:
    severity: error
    worksheet: 'Number of Judges'
    errorMessage: |
      At least one combination of Judge / Region is duplicated in 
      the Number of Judges worksheet. Please check worksheet.
  
- expr: `Judge Type` %in% validJudges
  name: 'Valid Judges'
  label: 'Valid Judges'
  description: |
    Checks that only valid Judges are referred to
  created: 2021-06-10
  meta:
    severity: error
    worksheet: 'Number of Judges'
    errorMessage: |
      At least one row in the Number of Judges worksheet refers to an invalid
      Judge. Referred-to Judges must be as named in the Judges worksheet.
      Check for typos.
  
- expr: is_complete(`Judge Type`, Region)
  name: 'No Missing Categories'
  label: 'No Missing Categories'
  description: |
    Checks no NAs in Judge or Region field, which would happen if value invalid
  created: 2021-06-10
  meta:
    severity: error
    worksheet: 'Number of Judges'
    errorMessage: |
      At least one row in the Number of Judges worksheet refers to an invalid
      Judge or Region. These must match those defined in the Judges and Regions
      worksheets. Check for typos.
